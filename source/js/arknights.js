"use strict";function getElement(t,e=document.documentElement){let s=e.querySelector(t);if(null===s)throw new Error("Unknown HTML");return s}function getParent(t,e=1){for(;e--;){let e=t.parentElement;if(null===e)throw new Error("Unknown HTML");t=e}return t}class dust{constructor(){this.x=50,this.y=50,this.vx=2*Math.random()+2,this.vy=2*Math.random(),this.color="#fff",this.shadowBlur=3*Math.random(),this.shadowX=2*Math.random()-1,this.shadowY=2*Math.random()-1,this.radiusX=3*Math.random(),this.radiusY=3*Math.random(),this.rotation=Math.PI*Math.floor(2*Math.random())}}class canvasDust{constructor(t){this.width=300,this.height=300,this.dustQuantity=50,this.dustArr=[],this.build=()=>{if(this.resize(),this.ctx){const t=canvasDust.getPoint(this.dustQuantity);for(let e of t){const t=new dust;this.buildDust(e[0],e[1],t),this.dustArr.push(t)}setInterval(this.play,40)}},this.play=()=>{var t;const e=this.dustArr;null===(t=this.ctx)||void 0===t||t.clearRect(0,0,this.width,this.height);for(let t of e)if(t.x<0||t.y<0){const e=this.width,s=Math.floor(Math.random()*window.innerHeight);t.x=e,t.y=s,this.buildDust(e,s,t)}else{const e=t.x-t.vx,s=t.y-t.vy;this.buildDust(e,s,t)}},this.buildDust=(t,e,s)=>{const i=this.ctx;t&&(s.x=t),e&&(s.y=e),i&&(i.beginPath(),i.shadowBlur=s.shadowBlur,i.shadowColor=s.color,i.shadowOffsetX=s.shadowX,i.shadowOffsetY=s.shadowY,i.ellipse(s.x,s.y,s.radiusX,s.radiusY,s.rotation,0,2*Math.PI),i.closePath(),i.fillStyle=s.color,i.fill())},this.resize=()=>{const t=this.canvas,e=window.innerWidth,s=window.innerHeight;this.width=e,this.height=s,this.dustQuantity=Math.floor((e+s)/38),void 0!==t&&(t.width=e,t.height=s)};const e=getElement(t);if(!e)throw new Error("canvasID 无效");this.canvas=e,this.ctx=e.getContext("2d"),this.build(),window.addEventListener("resize",()=>this.resize())}}canvasDust.getPoint=(t=1)=>{let e=[];for(let s=0;s<t;s++){const t=Math.floor(Math.random()*window.innerWidth),s=Math.floor(Math.random()*window.innerHeight);e.push([t,s])}return e};try{new canvasDust("#canvas-dust")}catch(t){}class Code{constructor(){this.reverse=(t,e,s)=>{const i=getParent(t);i.classList.contains(e)?(i.classList.remove(e),i.classList.add(s)):(i.classList.remove(s),i.classList.add(e))},this.doAsCode=t=>{const e=this.resetName(t.classList[1]),s=getElement(".gutter",t).children[0].childElementCount>>1;t.classList.add(s<16?"open":"fold"),t.innerHTML=`<span class="code-header">        <span class="code-title">          <div class="code-icon"></div>${this.resetName(e)} 共 ${s} 行</span>          <span class="code-header-tail">            <button class="code-copy"></button>            <span class="code-space">展开</span></span></span></span>      <div class="code-box">${t.innerHTML}</div>`,getElement(".code-copy",t).addEventListener("click",e=>{const s=e.target;navigator.clipboard.writeText(getElement("code",t).innerText),s.classList.add("copied"),setTimeout(()=>s.classList.remove("copied"),1200)}),getElement(".code-header",t).addEventListener("click",t=>{t.target.classList.contains("code-copy")||this.reverse(t.currentTarget,"open","fold")})},this.findCode=()=>{let t=document.querySelectorAll(".highlight");null!==t&&t.forEach(t=>{if(null===t.getAttribute("code-find")){try{t.classList.contains("mermaid")||null!==t.querySelector(".code-header")||(null!==t.querySelector(".mermaid")?this.doAsMermaid(t):this.doAsCode(t))}catch(t){return}t.setAttribute("code-find","")}})},this.findCode()}doAsMermaid(t){let e=t.querySelector(".mermaid");t.outerHTML='<div class="highlight mermaid">'+e.innerText+"</div>"}resetName(t){return"plaintext"==t?"TEXT":"cs"==t?"C#":"cpp"==t?"C++":t.toUpperCase()}}let code=new Code;class Cursor{constructor(){this.now=new MouseEvent(""),this.first=!0,this.last=0,this.moveIng=!1,this.fadeIng=!1,this.attention="a,input,button,textarea,.code-header,.gt-user-inner,.navBtnIcon",this.move=t=>{if(void 0!==this.now){let e=this.outer.left,s=this.outer.top,i=Number(e.substring(0,e.length-2)),o=Number(s.substring(0,s.length-2)),n=.3*(this.now.x-i),h=.3*(this.now.y-o);t-this.last>15&&(i+=n,o+=h,this.outer.left=i.toFixed(2)+"px",this.outer.top=o.toFixed(2)+"px",this.last=t),Math.abs(n)>.2||Math.abs(h)>.2?window.requestAnimationFrame(this.move):this.moveIng=!1}},this.reset=t=>{this.moveIng||(this.moveIng=!0,window.requestAnimationFrame(this.move)),this.now=t,this.first&&(this.first=!1,this.outer.left=String(this.now.x)+"px",this.outer.top=String(this.now.y)+"px")},this.Aeffect=t=>{0==this.fadeIng&&(this.fadeIng=!0,this.effecter.left=String(t.x)+"px",this.effecter.top=String(t.y)+"px",this.effecter.transition="transform .5s cubic-bezier(0.22, 0.61, 0.21, 1)        ,opacity .5s cubic-bezier(0.22, 0.61, 0.21, 1)",this.effecter.transform="translate(-50%, -50%) scale(1)",this.effecter.opacity="0",setTimeout(()=>{this.fadeIng=!1,this.effecter.transition="",this.effecter.transform="translate(-50%, -50%) scale(0)",this.effecter.opacity="1"},500))},this.hold=()=>{this.outer.height="24px",this.outer.width="24px",this.outer.background="rgba(255, 255, 255, 0.5)"},this.relax=()=>{this.outer.height="36px",this.outer.width="36px",this.outer.background="unset"},this.pushHolder=t=>{t.forEach(t=>{t.classList.contains("is--active")||(t.addEventListener("mouseover",this.hold,{passive:!0}),t.addEventListener("mouseout",this.relax,{passive:!0}))})},this.pushHolders=()=>{this.pushHolder(document.querySelectorAll(this.attention))};let t=document.createElement("div");t.id="cursor-container",t.innerHTML='<div id="cursor-outer"></div><div id="cursor-effect"></div>',document.body.appendChild(t),this.outer=getElement("#cursor-outer",t).style,this.outer.top="-100%",this.effecter=getElement("#cursor-effect",t).style,this.effecter.transform="translate(-50%, -50%) scale(0)",this.effecter.opacity="1",window.addEventListener("mousemove",this.reset,{passive:!0}),window.addEventListener("click",this.Aeffect,{passive:!0}),this.pushHolders();new MutationObserver(this.pushHolders).observe(document,{childList:!0,subtree:!0})}}window.onload=()=>new Cursor;class Index{constructor(){this.setItem=t=>{t.classList.add("active");let e=getParent(t),s=e.children;for(let t=0;t<s.length;t++){const e=s.item(t);if(e.classList.contains("toc-child")){e.classList.add("has-active");break}}for(;"toc"!=e.classList[0];e=getParent(e))"toc-child"==e.classList[0]&&e.classList.add("has-active")},this.reset=()=>{let t=document.querySelectorAll("#toc-div .active"),e=document.querySelectorAll("#toc-div .has-active");t.forEach(t=>{t.classList.remove("active")}),e.forEach(t=>{t.classList.remove("has-active")})},this.modifyIndex=(t,e)=>{let s=[];t.forEach(t=>{s.push(t.getBoundingClientRect().top)}),this.reset();for(let t=0;t<e.length;++t){const i=e.item(t);if(t+1==s.length||s[t+1]>150&&(s[t]<=150||0==t)){this.setItem(i);break}}},this.setHtml=()=>{let t=document.querySelectorAll("h2,h3,h4,h5,h6"),e=document.querySelectorAll(".toc-link");0!==e.length&&this.setItem(e.item(0)),getElement("main").addEventListener("scroll",()=>{0!==e.length&&this.modifyIndex(t,e)},{passive:!0})},document.addEventListener("pjax:success",this.setHtml),this.setHtml()}}new Index;class Header{constructor(){this.header=getElement("header"),this.button=getElement(".navBtnIcon"),this.closeSearch=!1,this.relabel=()=>{let t=this.header.querySelectorAll(".navItem"),e=0,s=t.item(0);if(getElement(".navBtn").classList.add("hide"),t.forEach(t=>{if("search-header"===t.id)return;let i=t,o=getElement("a",i);if(null!==o){let t=o.href,n=i.getAttribute("matchdata");if(i.classList.remove("active"),getParent(o)!=i)return;if(t.length>e&&null!==document.URL.match(t)&&(e=t.length,s=i),n){n.split(",").forEach(t=>{null!==document.URL.match(t)&&(s=i,e=1/0)})}}}),null!==s)do{s.classList.contains("navItem")&&s.classList.add("active")}while(!(s=getParent(s)).classList.contains("navContent"))},this.inHeader=t=>{let e=t.target;for(;e!==this.header&&e!==document.body;)e=getParent(e);e!==this.header&&this.close()},this.open=(t=this.header)=>{t.classList.add("expanded"),t.classList.remove("closed"),scrolls.slideDown(),t===this.header&&(t.classList.add("moving"),setTimeout(()=>t.classList.remove("moving"),300)),document.addEventListener("click",this.inHeader)},this.close=(t=this.header)=>{document.removeEventListener("click",this.inHeader),t.classList.add("closed"),t.classList.remove("expanded"),t===this.header&&(t.classList.add("moving"),setTimeout(()=>t.classList.remove("moving"),300),this.closeAll())},this.reverse=(t=this.header)=>{this.closeSearch?this.closeSearch=!1:t.classList.contains("expanded")?this.close(t):this.open(t)},this.closeAll=()=>{this.header.querySelectorAll(".expanded").forEach(t=>t.classList.remove("expanded"))},this.relabel(),document.addEventListener("pjax:success",this.relabel),document.addEventListener("pjax:send",()=>this.close()),this.button.addEventListener("mousedown",()=>{document.querySelector(".search")&&(this.closeSearch=!0)}),this.button.onclick=()=>this.reverse(this.header),document.querySelectorAll(".navItemList").forEach(t=>{(t=getParent(t)).classList.contains("navBlock")&&(t=getParent(t)),t.addEventListener("click",e=>{getParent(e.target)!==t&&getParent(e.target,2)!==t||this.reverse(t)})})}}var header=new Header;class Scroll{constructor(){this.scrolling=0,this.getingtop=!1,this.height=0,this.visible=!1,this.touchX=0,this.touchY=2147483647,this.mayNotUp=!1,this.reallyUp=!1,this.intop=!1,this.startTop=!1,this.dragBtn=!1,this.scrolltop=()=>{getElement("main").scroll({top:0,left:0,behavior:"smooth"}),this.totop.style.opacity="0",this.getingtop=!0,setTimeout(()=>this.totop.style.display="none",300)},this.totopChange=t=>{t.getBoundingClientRect().top<-200?(this.totop.style.display="",this.visible=!0,setTimeout(()=>{this.visible&&(this.totop.style.opacity="1")},300)):(this.totop.style.opacity="0",this.visible=!1,setTimeout(()=>{this.visible||(this.totop.style.display="none")},300))},this.slideDown=()=>{if(!this.intop)return;const t=getElement("main").classList;document.querySelector(".expanded")||getElement(".navBtn").classList.add("hide"),t.remove("up"),t.add("down"),t.add("down"),t.add("moving"),setTimeout(()=>{t.remove("down"),t.remove("moving")},300),this.intop=!1},this.slideUp=()=>{if(this.intop)return;const t=getElement("main").classList;getElement(".navBtn").classList.remove("hide"),t.remove("down"),t.add("up"),t.add("moving"),this.intop=!0,setTimeout(()=>getElement("main").classList.remove("moving"),300)},this.setHtml=()=>{try{let t=getElement(".navBtn"),e=()=>{try{let e=getElement("article").getBoundingClientRect().top;if(e>0)return;document.querySelector(".expanded")||(this.height-e>100?(t.classList.add("hide"),this.height=e):e>this.height&&(e-this.height>20&&t.classList.remove("hide"),this.height=e)),++this.scrolling,setTimeout(()=>{--this.scrolling||(this.getingtop=!1)},100),this.getingtop||this.totopChange(getElement("#post-title"))}catch(t){}};getElement("main").addEventListener("scroll",e),this.height=0,this.visible=!1,this.totop=getElement("#to-top")}catch(t){}},this.checkTouchMove=t=>{Math.abs(t.changedTouches[0].clientX-this.touchX)>50&&!this.reallyUp&&(this.mayNotUp=!0),document.querySelector(".expanded")||window.innerWidth>1024||this.mayNotUp||t.changedTouches[0].clientY==this.touchY||(this.startTop||getElement("article").getBoundingClientRect().top>=0)&&(this.reallyUp=!0,t.changedTouches[0].clientY>this.touchY?this.slideUp():this.slideDown(),this.touchY=t.changedTouches[0].clientY)},this.startTouch=t=>{this.touchX=t.changedTouches[0].clientX,this.touchY=t.changedTouches[0].clientY,this.mayNotUp=!1,this.startTop=getElement("article").getBoundingClientRect().top>=0},document.addEventListener("pjax:success",this.setHtml),document.addEventListener("touchstart",this.startTouch),document.addEventListener("touchmove",this.checkTouchMove),document.addEventListener("wheel",t=>{document.querySelector(".expanded")||window.innerWidth>1024||getElement("article").getBoundingClientRect().top>=0&&(t.deltaY<0?this.slideUp():this.slideDown())}),this.setHtml(),this.totop=document.querySelector("#to-top")}}var scrolls=new Scroll;class pjaxSupport{constructor(){this.loading=getElement(".loading"),this.left=getElement(".loadingBar.left"),this.right=getElement(".loadingBar.right"),this.timestamp=0,this.start=t=>{this.left.style.width=t+"%",this.right.style.width=t+"%",++this.timestamp},this.loaded=()=>{++this.timestamp,"1"===this.loading.style.opacity&&(getElement("main").scrollTop=0,"50%"!==this.left.style.width&&(this.start(50),setTimeout(t=>{this.timestamp==t&&(this.loading.style.opacity="0")},600,this.timestamp)))},document.addEventListener("pjax:send",()=>{getElement("main").classList.contains("up")&&scrolls.slideDown(),this.loading.classList.add("reset"),this.start(0),setTimeout(t=>{this.timestamp==t&&(this.loading.style.opacity="1",this.loading.classList.remove("reset"),this.start(15),setTimeout(t=>{this.timestamp==t&&this.start(30)},800,this.timestamp))},10,this.timestamp)}),document.addEventListener("pjax:start",this.loaded),document.addEventListener("pjax:complete",this.loaded)}}try{new pjaxSupport}catch(t){}